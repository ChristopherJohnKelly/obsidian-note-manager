version: '3.8'

services:
  librarian-runner:
    build:
      context: .
      args:
        # Change to 'x64' if running on non-Apple Silicon Mac
        RUNNER_ARCH: arm64 
    image: obs-librarian-runner
    environment:
      # Pass these in a .env file
      REPO_URL: "https://github.com/christopherjohnkelly/obsidian-notes"
      GITHUB_TOKEN: "${GITHUB_RUNNER_TOKEN}"
      RUNNER_NAME: "pi-librarian"
      GEMINI_API_KEY: "${GEMINI_API_KEY}"
    # Uncomment the following volume mount for development (allows code changes without rebuild)
    # volumes:
    #   - ./src:/home/runner/src
    restart: unless-stopped
